"use strict";$(function(){function e(){var s=!1,e=$("#username").val();return""===e?($("#username").css("border","2px solid red"),$("#username-span").html("请输入用户名").css("color","red")):/^[a-zA-Z0-9\u4E00-\u9FA5]{2,8}$/.test(e)?$.ajax({url:"http://139.9.177.51:3333/p2p/accrepeat",type:"post",async:!1,data:{username:e},success:function(e){var r=e.code,e=e.msg;200===r?($("#username").css("border","2px solid green"),$("#username-span").html(""),s=!0):500===r&&($("#username").css("border","2px solid red"),$("#username-span").html(e).css("color","red"))}}):($("#username").css("border","2px solid red"),$("#username-span").html("请输入2-8个字母、数字、下划线、中文").css("color","red")),s}function r(){var e=!1,r=$("#pwd").val();return""===r?($("#pwd").css("border","2px solid red"),$("#pwd-span").html("请输入密码").css("color","red")):/^(\w){6,20}$/.test(r)?($("#pwd").css("border","2px solid green"),$("#pwd-span").html(""),e=!0):($("#pwd").css("border","2px solid red"),$("#pwd-span").html("只能输入6-20个字母、数字、下划线  ").css("color","red")),e}function s(){var e=!1,r=$("#pwd").val(),s=$("#dbpwd").val();return""===s?($("#dbpwd").css("border","2px solid red"),$("#dbpwd-span").html("请再次输入密码").css("color","red")):r!==s?($("#dbpwd").css("border","2px solid red"),$("#dbpwd-span").html("两次密码不一样").css("color","red")):($("#dbpwd").css("border","2px solid green"),$("#dbpwd-span").html(""),e=!0),e}function n(){var e=!1,r=$("#email").val();return""===r?($("#email").css("border","2px solid red"),$("#email-span").html("请输入邮箱").css("color","red")):/^([a-zA-Z\d])(\w|\-)+@[a-zA-Z\d]+\.[a-zA-Z]{2,4}$/.test(r)?($("#email").css("border","2px solid green"),$("#email-span").html(""),e=!0):($("#email").css("border","2px solid red"),$("#email-span").html("只能输入正确的邮箱").css("color","red")),e}function d(){var e=!1,r=$("#nickname").val();return""===r?($("#nickname").css("border","2px solid red"),$("#nickname-span").html("请输入昵称").css("color","red")):/^[a-zA-Z0-9\u4E00-\u9FA5]{2,8}$/.test(r)?($("#nickname").css("border","2px solid green"),$("#nickname-span").html(""),e=!0):($("#nickname").css("border","2px solid red"),$("#nickname-span").html("请输入2-8个字母、数字、下划线、中文").css("color","red")),e}$("#username").on("blur",e),$("#pwd").on("blur",r),$("#dbpwd").on("blur",s),$("#email").on("blur",n),$("#nickname").on("blur",d),$("#regbtn").on("click",function(){[e,r,s,n,d].map(function(e){return e()}).some(function(e){return e})&&$.ajax({url:"http://139.9.177.51:3333/p2p/reg",type:"post",data:{username:$("#username").val(),pwd:$("#pwd").val(),email:$("#email").val(),nickname:$("#nickname").val()},success:function(e){var r=e.msg,e=e.code;200===e?(alert(r),location.href="../login.html"):500===e&&alert(r)}})})});