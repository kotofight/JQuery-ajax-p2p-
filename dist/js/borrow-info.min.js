"use strict";$(function(){var o=JSON.parse(localStorage.id),a=void 0,n=void 0;function e(){$.ajax({url:"http://139.9.177.51:3333/p2p/getborrowinfo",type:"get",data:{borrowid:o},success:function(o){var r,e=o.code,t=o.msg;200===e?(r=o.data,a=r.minbid,0===(n=r.borrowmoney-r.ownmoney)&&$("#confirm").prop("disabled",!0).text("已集满"),o='\n                <div class="progress-bar"\n                            style="width: '+(o=(r.ownmoney/r.borrowmoney*100).toFixed(2))+"%; background: linear-gradient(to right, #da81a1 "+o/2+"%,#7aa4c8 "+o+'%); ">\n        <div div  > '+o+" %</div >\n                        </div >\n        ",$("#borrow-info-username").html(r.username),$("#chargeMinbid").html(a),$("#borrow-info-title").html(r.title),$("#borrow-info-borrowmoney").html(r.borrowmoney+"￥"),$("#borrow-info-interest").html(r.interest+"%"),$("#borrow-info-borrowtime").html(r.borrowtime+"月"),$("#borrow-info-repaytype").html(0==r.repaytype?"按月分期":"按月到期"),$("#borrow-info-minbid").html(r.minbid+"￥"),$("#borrow-info-need").html(n+"￥"),$("#chargeNeed").html(n+"￥"),$("#borrow-info-progress").html(o)):500===e&&alert(t)}})}e(),$("#chargeConfirm").on("click",function(){isNaN(parseInt($("#chargeMoney").val()))?(alert("请输入正确金额"),$("#chargeMoney").val(a)):$("#chargeMoney").val()<a?alert("投资金额不能小于最小投标"):$("#chargeMoney").val()>n?(alert("投资金额不能大于剩余需求，目前此项目最大投资"+n+"元"),$("#chargeMoney").val(n)):$.ajax({url:"http://139.9.177.51:3333/p2p/invest",type:"post",data:{userid:JSON.parse(localStorage.user).id,borrowid:o,chargemoney:$("#chargeMoney").val()},success:function(o){var r=o.code,o=o.msg;200===r?(alert(o),$("#staticBackdrop").modal("hide"),e()):500===r&&alert(o)}})})});